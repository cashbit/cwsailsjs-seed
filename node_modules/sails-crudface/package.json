{
  "name": "sails-crudface",
  "version": "0.1.3",
  "description": "A sailsjs node module for \"systematic\" scrud interface generation",
  "dependencies": {},
  "repository": {
    "type": "git",
    "url": "https://github.com/cashbit/sails-crudface.git"
  },
  "author": {
    "name": "Cashbit"
  },
  "readme": "sails-crudface\n==============\n\n**A [sails](https://github.com/balderdashy/sails) node module for \"systematic\" scrud interface generation with MVC architecture.**\n\nIf you want sails generate views on the fly for your models, you can use this module and create a configuration file describing the fields and the layout you need for every controller/model.\n\nOften for data entry is not needed complexity but simplicity.\nAlso, writing the code for the view part of the MVC architecture is a repetitive task, because you may want a standard layout for toolbars, buttons, lists, and so on.\n\nsails-crudface automates the task of creating the user interface for search and entry of data.\n\nThe resulting user interface is plain and responsive HTML with [jQuery](http://jquery.com/download/) and [Bootstrap](http://getbootstrap.com/getting-started/#download)\n\nSails it's an MVC realtime framework for web application development, please visit the [official site](http://sailsjs.org/) to know more.\n\n#### REST Approach\n\nThe url schema is [REST](http://en.wikipedia.org/wiki/Representational_state_transfer) based, so we have the following possible default implementation for the API:\n\n```\nhttp://<host>:<port>/<controller>[/<operation>][/<id>]\n```\n\nWhere ```host``` is the host name where sails is running at ```port``` and ```controller``` is the name of the controller/model where the data will be managed and stored.\n\nFor example: ```http://localhost:1337/contact```, will show the list of contact stored in the contact table/collection (depending on the DB engine you are using).\n\n```Operation``` can be one of the following:\n\n- ```index```: (implicit) shows al the contacts\n- ```new```: presents the view to add a new contact\n- ```show```: presents the view to display one specificied contact by ```id```\n- ```edit```: presents the view to edit one specified contact by ```id```\n\nExample for index: ```http://localhost:1337/contact/```\n\nExample for new: ```http://localhost:1337/contact/new```\n\nExample for show: ```http://localhost:1337/contact/show/52fa26c7322e9fe034000027```\n\nExample for edit: ```http://localhost:1337/contact/edit/52fa26c7322e9fe034000027```\n\nIt works both with SQL and NOSQL database adapters.\n\n#### Supported field types\n\n- text\n- date\n- button group\n- dropdown (with or without relationship)\n- checkbox\n- textarea\n- button\n\n#### Form component layout\n\nYou can specify a layout for the components (rows and cols) or let the components flow vertically from the top of the page.\nThe layout is responsive, mobile first. It's based on the \"[Bootstrap grid system](http://getbootstrap.com/css/#grid)\", so you can decide for each row, the position and the size of each component.\n\n\n#### Localization\n\nThe components labels are localizeable using the standard i18n in sails, see ```config/locales/_README.md``` to understand how it works, but in short: for each component label, you can specify a localized version.\n\n\n## [Install](id:install)\nFirst of all, you need an existing sails project ([see here if you want to create a new sailsjs project](http://sailsjs.org/#!getStarted)), **beware: use the --linker option creating the new project**).\n\n```\nsails new mytestproject --linker\n```\n\nGo to the sails project folder and install the module with npm:\n\n```\nnpm install sails-crudface\n```\n\nThe following steps are needed to add the necessary assets to your sails project:\n\n1. Install [jQuery](http://jquery.com/download/) and add the ```'linker/js/jquery.js',``` line in the ```Gruntfile.js``` after the ```'linker/js/app.js',``` line.\n2. Goto the ```components``` folder in ```node_modules/sails-crudface```\n2. Copy the ```_crud.js``` file in the ```assets/js``` folder of your sails project\n3. Add the ```bootstrap``` CSS ([download](http://getbootstrap.com/getting-started/#download)), copy all the sobfolders (js,fonts,style in the ```assets/linker```)\n4. Add the ```bootstrap form helpers``` ([download](http://bootstrapformhelpers.com/)) (free version it's OK)\n3. Update the ```view/layout.ejs``` file in order to load jQuery.js and _crud.js\n3. The module contains two sub-folders:```_crud``` and ```_crudtemplates```, **copy both subfolders** in the ```view``` folder of your sails project.\n4. FileUploads controller and model: in order to manage not only text, date and number fields but file attachments too, you need to:\n\t1. copy the FileuploadsController.js file in the ```api/controllers``` folder\n\t2. generate the Fileuploads model with:```sails generate model Fileuploads```\n\t\nWe are planning to automate the whole installation process in future versions.\n\n## First example: Contact management view\n\nPlace you may want to create a view for a contact management model with the fields:\n\n- firstname\n- lastname\n- phone\n- email\n\n#### 1. Generating model and controller\n\nThe first requirement is to have a model and a controller, so we will call the model: \"contact\", use this command:\n\n```\nsails generate contact\n```\n\n#### 2. Edit the controller\n\nOpen the ```ContactController.js``` file you can find in the ```api/controllers``` folder of the sails project, replace the generated javascript with the line:\n\n```\nmodule.exports = require(\"sails-crudface\").init(module,__dirname) ;\n```\n\n#### 3. Create the \"crud\" configuration file\n\nIn the ```api/controllers``` folder create a new file named: ```ContactCrudConfig.js```.\n\nThis is the place where ```sails-crudface``` will search for the view configuration.\n\nSet the new file content with:\n\n```\n{\n    \"prettyName\"  : \"Contact\",\n\n    \"fieldsConfig\": [\n        {\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"lastname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"email\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"phone\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"birthdate\", \"ines\":\"nes\", \"type\": \"date\"}\n    ]\n}\n```\n\n#### 4. Create the contact view folder\n\nIn order to display the user interface the module needs a view folder with the same name of the model.\nSo copy the ```_crudtemplate``` folder in the ```contact``` in the ```view``` folder of your project.\n\n#### 5. Run your sails project\n\n```sails lift```\n\n#### 6. Visit the contact view\n\nOpen the browser at [```http://localhost:1337/contact```](http://localhost:1337/contact)\n\nEnjoy !!\n\n## Crud configuration file specifications\n\nThe crud configuration file is readed each time the view is invoked with the browser (no need to restart sails if you want to modify the view content and layout).\nFor each controller is needed the respective JSON crud configuration file, like in the example above, if for the contact controller we need ```ContactController.js``` for the Crud configuration file we need ```ContactCrudConfig.js```.\n\nThe crud configuration file describes the view in each of the four situations: ```index```,```new```,```edit```,```show```.\n\nAlso describes the fields layout, the available search fields and the title.\n\nAn example follow to show the five first level elements for the configuration:\n\n```\n{\n    \"prettyName\"  : \"<a human readable title for the view>\",\n\n    \"textSearchFields\": [<array of text fields from the model for the search section>],\n\n    \"facets\": [<array of facets for the search section>],\n\n    \"layout\" : [<array of fieldsets, \n    \t\t\t\teach fieldset has a name and contains one or more rows, \n    \t\t\t\t\teach row contains one or more fields>],\n\n    \"fieldsConfig\": [<array of controls, each control has \"name\", \"type\" and \"ines\">]\n}\n```\n\n#### Who is \"ines\" ?\n\n(i)ndex | (n)ew | (e)dit | (s)how = \"ines\".\n\nThe \"ines\" property for a control visible only in the \"show\" view, is \"s\", while for a control always visible is \"ines\".\n\nBecause the ```index``` view shows a list of records (aka objects) you may want to show only few fields (aka properties) in the list. \n\nIn the given contact example, the fields the user see in the list are ```firstname``` and ```lastname```.\nThe ```email```,```phone```,```birthdate``` fields are not visible in the ```index``` view.\n\n### textSearchFields\n\nThis property of the Crud configuration file teach the controller (and to the view) wich fields of the model are searchable. For the above contact example, you can set this property as follows:\n\n```\n{\n    \"prettyName\"  : \"Contact\",\n    \n    \"textSearchFields\": [\"firstname\",\"lastname\",\"email\",\"phone\"],\n\n    \"fieldsConfig\": [\n        {\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"lastname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"email\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"phone\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"birthdate\", \"ines\":\"nes\", \"type\": \"date\"}\n    ]\n}\n```\n\nBy default, without ```textSearchFields``` specifications, the controller searches in the fieldsConfig and automatically adds fields with matching conditions to the ```textSearchFields```.\nMatching conditions are:\n\n- a field with \"name\" = \"name\"\n- one or more fields with \"inname\" property set to ```true```\n\nThe following example search only the ```firstname``` field.\n\n```\n{\n    \"prettyName\"  : \"Contact\",\n    \n    \"fieldsConfig\": [\n        {\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"inname\":true},\n        {\"name\": \"lastname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"email\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"phone\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"birthdate\", \"ines\":\"nes\", \"type\": \"date\"}\n    ]\n}\n```\n\n### facets\n\nTry this example:\n\n```\n{\n    \"prettyName\"  : \"Contact\",\n        \n    \"facets\": [\n        {\"field\": \"department\", \"option\": \"department\", \"caption\":\"Department\"}\n    ],\n    \n    \"fieldsConfig\": [\n        {\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"inname\":true},\n        {\"name\": \"lastname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"email\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"phone\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"birthdate\", \"ines\":\"nes\", \"type\": \"date\"},\n        {\n        \t\"name\": \"department\", \n        \t\"ines\":\"ines\", \n        \t\"type\":\"buttongroup\", \n        \t\"options\":[\"Admin\",\"Development\",\"Sales\"]\n        }\n    ]\n}\n```\n\nPlease note two new elements: the ```facet``` property and a new element in the ```fieldsConfig``` property, both referring to the new ```department``` field.\n\nThe view will show a new dropdown menu in the search section (and a new buttongroup field-control). \n\nThe user can \"select\" the department for each contact while creating or editing the contact by clicking the respective button in the new button group named \"department\".\n\nThe user can \"filter\" the index view using the dropdown and selecting one of the existing options. Options are populated directly from the present values in the ```department``` field for each row. For each option is visible a \"count\" of corresponding rows.\n\n### layout\n\nOne of the more difficult things trying developing a responsive user interface for data entry,search and update is deciding and describing a responsive layout.\n\nUsing the \"[Bootstrap grid system](http://getbootstrap.com/css/#grid)\" we found a good solution (or we think so) to the problem.\n\nIn the actual configuration, without layout specifications, all the fields are distributed in a top-down vertical layout, using the 100% page width.\n\nLet's make an example organizing the layout of the contact example.\n\nPut we want a first section for ```firstname``` and ```lastname```, both on the same row, another section named \"Details\" for the contacts fields (```email```,```phone```), ```birthdate``` and ```department```.\n\nThis is the resulting configuration:\n\n```\n{\n    \"prettyName\"  : \"Contact\",\n        \n    \"facets\": [\n        {\"field\": \"department\", \"option\": \"department\", \"caption\":\"Department\"}\n    ],\n    \n\t\"layout\" : [\n        {\n          \"section\": \"\", \"rows\": [\n            {\"firstname\":6, \"lastname\":6}\n          ]\n        },\n        {\n            \"section\":\"Details\",\"rows\":[\n                {\"email\":8, \"phone\":4},\n                {\"birthdate\":4,\"department\":8}\n            ]\n        }\n    ],\n        \n    \"fieldsConfig\": [\n        {\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"inname\":true},\n        {\"name\": \"lastname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"email\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"phone\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"birthdate\", \"ines\":\"nes\", \"type\": \"date\"},\n        {\n        \t\"name\": \"department\", \n        \t\"ines\":\"ines\", \n        \t\"type\":\"buttongroup\", \n        \t\"options\":[\"Admin\",\"Development\",\"Sales\"]\n        }\n    ]\n}\n```\n\nEach element in the ```layout``` array has two properties: \n\n- ```section```: (can be blank) is the caption for the section, a group of rows\n- ```rows```: each row can have one or more fields.\n\nEach field specifies the width that the relative control will use in the grid.\nThe total width of each row is 12 (as described in the Bootstrap grid system).\nSo ```firstname:6``` specifies that we want the width equal to 50% of the page.\n\nThis means also that:\n\n- the minimum width for each control is 1\n- we can have at least 12 controls of width=1 for each row\n- the maximum width for each control is 12\n- a good distribution of fields yeld always 12 as the sum of the width of each field in a row\n\nTry the above example opening the ```contact``` show view both in a desktop browser and in your mobile browser to see the responsive layout (or simply try to reduce the with of the browser window to a minimum 320px).\n\n### fieldsConfig\n\nThe array containing the complete list of controls of the view.\n\nAs mentioned above, each list element must have at least 3 properties:\n\n- ```name```: the model 'fieldname' where the entered data will be stored and later readed\n- ```type```: the kind of control will be displayed (textfield, calendar, dropdown, ...)\n- ```ines```: in witch view the control will be displayed (see above: Who is ines?)\n\nAn optional property is ```label```, so you can decide a decent label for each control regardless the name, example:\n\n```\n{\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"label\":\"First name\"}\n```\n\nAs mentioned above, the ```label``` property will be localized according to the ```config/locales/``` settings.\n\nAnother optional property is ```class``` used in the ```index``` view for the ```<td>``` element displaying the value of the field.\nFor example:\n\n```\n{\"name\": \"amount\", \"ines\": \"ines\", \"type\": \"text\", \"class\":\"text-right\"}\n\n```\nWill align right the value.\n\n\n#### The \"type\" property\n\nThis property define the kind of control will be displayed. Valid types are:\n\n- ```text```: to display and edit text and numbers\n- ```read-only-text```: as above, to display only\n- ```link```: to display an url and automatically creating the ```<a>``` element\n- ```date```: to display and edit dates with a calendar\n- ```textarea```: to display and edit text on more than one line\n- ```checkbox```: to display and edit booleans\n- ```select```: to display and select values from a list (with or without relationship/association)\n- ```select-add```: to display and select values from a list (with or without relationship/association) with an \"add\" button\n- ```read-only-select```: as above, but to display only\n- ```buttongroup```: same as ```select```, but for small amount of options\n- ```button```: can call a custom action in the underlying controller\n- ```detail```: to display records (objects) from a one-to-many relationship/association\n\n#### Examples\n\n##### type: text\n\n```\n{\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"label\":\"First name\"}\n```\n\nSpecify a placeholder property if needed (placeholder attribute for boostrap form control).\n\n```\n{\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"label\":\"First name\", \"placeholder\":\"Type here you firstname\"}\n```\n\n##### type: read-only-text\n\n```\n{\"name\": \"firstMeetingNotes\", \"s\": \"ines\", \"type\": \"read-only-text\"}\n```\nUseful to display calculated values, or one-time-editing fields, like in the example below: \n\n```\n...\n{\"name\": \"firstMeetingNotes\", \"ines\": \"n\", \"type\": \"text\"},\n{\"name\": \"firstMeetingNotes\", \"ines\": \"es\", \"type\": \"read-only-text\"}\n...\n```\nIn this example the field is defined two times, the first will be used in the ```new``` view (during record creation) and the second both in the ```edit``` and ```show``` view.\n\n\n##### type: link\n\n```\n{\"name\": \"website\", \"ines\": \"ines\", \"type\": \"link\"}\n```\nIn the ```new``` and ```edit``` views will be displayed as the type:text, otherwise will be displayed as an ```<a>``` element.\n\n##### type: textarea\n\n```\n{\"name\": \"notes\", \"ines\": \"nes\", \"type\": \"textarea\"}\n```\n\n##### type: checkbox\n\n```\n{\"name\": \"vip\", \"ines\": \"ines\", \"type\": \"checkbox\"}\n```\nThe corresponding values for the checked and unchecked state are, by default, ```true``` and ```false```.\nIf you need to store and retrieve different values you can specify the properties like in the example below:\n\n```\n{\"name\": \"vip\", \"ines\": \"ines\", \"type\": \"checkbox\", \"checkedValue\":\"YES\",\"uncheckedValue\":\"NO\"}\n```\n\n##### type: select\n```\n{\n\t\"name\": \"department\", \n    \"ines\":\"ines\", \n    \"type\": \"select\",\n   \t\"options\":[\"Admin\",\"Development\",\"Sales\"]\n}\n```\nThis is a particular kind, because it change the behavior depending the kind of view:\n\n- ```new```: presents a drop-down list, with no value selected\n- ```edit```: presents a drop-down list, with the selected value according the value stored in the model\n- ```show```: presents a read-only-text field with a button ```>>``` on the right if the content of the dropdown list is populated from a relationship/association (see below: ```options```)\n- ```index```: presents the value according the value stored in the model and eventually looks-up the value in the model from the other side of the relationship (see below:```options```)\n\n###### options\n\nThe ```options``` property defines how the \"option\" tags are populated in the html ```<select>``` element. \n\nYou can use a simple array of flat strings like below:\n\n```\n\t\"options\":[\"Admin\",\"Development\",\"Sales\"]\n```\n \nor a more complex array with objects, like below:\n\n```\n\t\"options\":[\n\t\t{\"id\":\"0\",\"text\":\"poor\"},\n\t\t{\"id\":\"1\",\"text\":\"fair\"},\n\t\t{\"id\":\"2\",\"text\":\"good\"}\n\t]\n```\nIn this case, the value stored in the model will be \"0\",\"1\" or \"2\", but the drop-down list will be populated with \"poor\",\"fair\",\"good\".\n\nAnother way to populate a dropdown list is ```relationship```, like in the example below:\n\n```\n{\n\t\"name\": \"customer\", \n\t\"type\": \"select\",\n\t\"ines\": \"nes\", \n\t\"relationship\": {\n\t\t\"entity\": \"customer\",\n\t\t\"inname\": \"name\",\n\t\t\"filter\":{}\n\t}\n}\n```\nIn this case, you must provide a model called \"customer\" where the controller will find the list of customer to display in the drop-down list.\n\nThe list is filtered with the ```filter``` expression, the drop-down list values are populated with the ids of records(objects) and the option value with the ```inname``` field. \n\nThis means that if the \"customer\" record/object has a field \"name\", the value of that field will appear in the drop-down list, but the value stored in the contact record is the id of the selected customer in the drop-down list.\n\n###### filter\n\nThe filter can be described with an object like:\n\n```\n{\n  name: 'Steven',\n  age: 32,\n  phone:'(210)-555-1234'\n}\n\n```\nEquivalent to SQL expression:\n\n```\nSELECT * FROM customer WHERE name = 'Steven' AND age = 32 AND phone = '(210)-555-1234'\n```\n\nYou can find more info [here](http://sailsjs.org/#!documentation/models) at \"find\" paragraph.\n\n##### type: add-select\n\nThis is like the ```select``` type except it presents an \"Add\" button.\nClicking the Add button it opens a new browser window to create a new record.\nThe created new record will be available in the select drop-down menu (ajax update).\nThis is the useful kind of field when the user needs to add a new related record on the fly.\n\n##### type: read-only-select\n\nThis kind of control is used mainly to provide an hypertext link to the releated record in relationship->entity.\nIt cannot be edited from the user.\n\n##### type: buttongroup\n\nThis kind of control presents a list of buttons. The specifications are the same of the type \"select\", example:\n\n```\n{\n\t\"name\": \"projecttype\", \n\t\"type\": \"buttongroup\",\n\t\"ines\": \"nes\", \n\t\"relationship\": {\n\t\t\"entity\": \"projecttype\",\n\t\t\"inname\": \"name\",\n\t\t\"filter\":{}\n\t}\n}\n```\n\n##### type: button\n\nThis kind of control crates a button with an underlying url, composed by the controller url and the ```action``` property, see example:\n\n```\n{\"name\": \"Normalize contact\",\"ines\":\"s\",\"type\":\"button\",\"action\":\"normalize\"}\n```\nThe underlying url will be: ```http://localhost:1337/contact/normalize/52fa26c7322e9fe034000027```\n\nIn the example, the \"normalize\" action is implemented in the controller, see example:\n\n\n```\nmodule.exports = require('sails-crudface').init(module,__dirname) ;\n\nmodule.exports.normalize = function(req,res,next){\n\t...\n\t...\n\t// your code here\n\t...\n\t...\n\t\n};\n```\n\n\n##### type: detail\n\nThis kind, in the ```show``` view, permits to show a list of records related to the current record.\nIn the example below: for each customer we can manage many contacts.\nThe following code will be placed in the CustomerCrudConfig.js in the ```fieldsConfig``` section:\n\n```\n\t\t{\"name\": \"contacts\", \n\t\t\t\"ines\":\"s\", \n\t\t\t\"type\":\"detail\", \n\t\t\t\"model\":\"contact\", \n\t\t\t\"key\":\"customer\", \n\t\t\t\"fields\":[\n\t\t\t\t{\"name\":\"firstname\",\"label\":\"First name\"},\n\t\t\t\t{\"name\":\"lastname\", \"label\":\"Last name\"}\n\t\t\t],\n\t\t\t\"filter\": {},\n\t\t\t\"destroyMethod\":\"delete\", \"destroyEnabled\":true,\n\t\t\t\"addEnabled\": true,\n\t\t\t\"addPosition\": \"top\",\n\t\t\t\"label\":\"Contacts\"\n\t\t}\n```\ndon't forget to add a reference to \"contacts\" in the ```layout``` section adding an element like this:\n\n```\n{\n\tsection: \"\", rows:[\n\t\t{\"contacts\":12}\n\t]\n}\n```\n\nand requires a relationship in the ContactCrudConfig.js\n\n```\n{\n\t\"name\": \"customer\", \n\t\"type\": \"select\",\n\t\"ines\": \"nes\", \n\t\"relationship\": {\n\t\t\"entity\": \"customer\",\n\t\t\"inname\": \"firstname\",\n\t\t\"filter\":{}\n\t}\n}\n```\n\nTo see the list of contact managed for a customer, you need to navigate to one of the customers.\n\n###### detail configuration\n\nThe keys in detail configuration are:\n\n- ```destroyMethod```: can be \"delete\" or \"detach\"\n- ```destoryEnabled```: false to hide the \"Delete/Detach\" button for each record\n- ```addEnabled```: false to hide the \"Add\" button\n- ```addPosition```: can be \"top\" or \"bottom\" or \"both\"\n- ```label```: optional\n\n\n## Complete example\n\nIn the ```example``` folder you can find a complete example you can use for a starting point.\nThe example presents a Contact model/controller and a Customer model/controller, with a relationship contact->Customer and can be used for a starting point for a complete application.\nThe example can work in a complete sails setup with all the [Installation](#install) steps completed.\n\n## Addendum\n\n### Attachments\n\nIn the ```show``` view is possible to have a drop zone where the user can drop files as attachments to the actual record.\n\nAdd this two settings to the CrudConfig file:\n\n```\n\"showAttachments\" : true,\n\"attachmentIsPublic\": true\n```\nIf ```attachmentIsPublic``` all the attachments for that record will be visible for all users, otherwise will be visible only for the same user that uploaded the file.\n\n\n### Sorting\n\nDefault sorting is defined automatically on fields with ```\"inname\":true```.\nOtherwise you can set ```fieldSort``` like following:\n\n```\n\"fieldSort\":{\n\t\"lastname\":1,\n\t\"firstname\":1\n},\n```\n\nSee [waterline docs](https://github.com/balderdashy/waterline-docs/blob/master/query-language.md) for more.\n\nExample, sorting contacts by lastname,firstname and finally by birthdate (descending) :\n\n\n```\n{\n    \"prettyName\"  : \"Contact\",\n        \n    \"facets\": [\n        {\"field\": \"department\", \"option\": \"department\", \"caption\":\"Department\"}\n    ],\n    \n\t\"layout\" : [\n        {\n          \"section\": \"\", \"rows\": [\n            {\"firstname\":6, \"lastname\":6}\n          ]\n        },\n        {\n            \"section\":\"Details\",\"rows\":[\n                {\"email\":8, \"phone\":4},\n                {\"birthdate\":4,\"department\":8}\n            ]\n        }\n    ],\n       \n    \"fieldSort\":{\n\t\t\"lastname\":1,\n\t\t\"firstname\":1,\n\t\t\"birthdate\":0\n\t}, \n\t\n    \"fieldsConfig\": [\n        {\"name\": \"firstname\", \"ines\": \"ines\", \"type\": \"text\", \"inname\":true},\n        {\"name\": \"lastname\", \"ines\": \"ines\", \"type\": \"text\"},\n        {\"name\": \"email\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"phone\", \"ines\": \"nes\", \"type\": \"text\"},\n        {\"name\": \"birthdate\", \"ines\":\"nes\", \"type\": \"date\"},\n        {\n        \t\"name\": \"department\", \n        \t\"ines\":\"ines\", \n        \t\"type\":\"buttongroup\", \n        \t\"options\":[\"Admin\",\"Development\",\"Sales\"]\n        }\n    ]\n}\n```\n\nPlease note: the ```fieldSort``` property can be used in the field type ```detail``` too.\n\n\n### Distinct\n\nSometimes you need to display only distinct records, based on a comparison field.\nYou can set ```distinctFieldName``` with the name of the comparison field.\nFor example, ```id```.\n\n## Controller API\n\n### customIdentity\n\nIn the controller you can specify ```module.exports.customIdentity``` if you want to name the controller ```person``` but use the ```user``` model:\n\n```\nmodule.exports.customIdentity = \"user\";\n```\n### getFilter\n\nIf specified in the controller, this function is called before searching for records/object in the ```index``` view.\nExample:\n\n```\nmodule.exports.getFilter = function(req,res,cb){\n\tcb(null,{group:\"b2b\"}) ;\n};\n```\nThe record presented in the ```index``` view will have \"group === 'b2b'\".\nIf you want to return an error use the first parameter in the callback function as in the nodejs standard.\n\n### beforeCreate\n\nIf specified in the controller, this function is called before saving the new object in memory.\n\n```\nmodule.exports.beforeCreate = function(req,res,newObj,cb){\n\tnewObj.group = \"b2b\" ;\n\tcb() ;\n} ;\n```\n\n### beforeIndex\nIf specified in the controller, this function is called for each record will be listed in the ```index``` view.\nYou can modify the record and then call cb([err]).\n\n```\nmodule.exports.beforeView = function(record,cb){\n\trecord._crudConfig.canShow = false ;\n\trecord._crudConfig.canDelete = false ;\n\trecord._crudConfig.canEdit = false ;\n\trecord._crudConfig.gotoUrl = '/proposal/show/'+record.id\n} ;\n\n\n## Runtime javascript API\n\nIf you need to run some javascript code when the page is loaded for a certain view, you can add a ```script``` tag in the EJS file.\nExample follow for the ```show``` view:\n\n```\n<% include ../_crud/show.ejs %>\n\n< script>\n\t_crud_documentReady = function(){\n\n\t// your code here will be called on load (see _crud.js for more)\n\n\t}\n</script>\n\n```\n\n\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/cashbit/sails-crudface/issues"
  },
  "homepage": "https://github.com/cashbit/sails-crudface",
  "_id": "sails-crudface@0.1.3",
  "_shasum": "ca64452856d0fb08331f0dc671d866d406e0b4e0",
  "_from": "sails-crudface@"
}
